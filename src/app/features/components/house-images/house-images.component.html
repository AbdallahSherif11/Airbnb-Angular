<div class="relative w-full">
    <!-- Main image display -->
    <div class="aspect-[16/9] w-full rounded-xl overflow-hidden bg-gray-100 relative">
      @if (images.length > 0) {
        <img 
          [src]="images[currentImageIndex]" 
          alt="House image"
          class="w-full h-full object-cover"
          loading="lazy"
        >
      }
      
      <!-- Navigation arrows -->
      @if (images.length > 1) {
        <button 
          (click)="prevImage()"
          class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-100"
          aria-label="Previous image"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        
        <button 
          (click)="nextImage()"
          class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-100"
          aria-label="Next image"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      }
    </div>
    
    <!-- Thumbnail gallery -->
    @if (images.length > 1) {
      <div class="grid grid-cols-4 gap-2 mt-2">
        @for (image of images.slice(0, 4); track image; let i = $index) {
          <div 
            class="aspect-video rounded-md overflow-hidden cursor-pointer"
            [class.ring-2]="currentImageIndex === i"
            [class.ring-primary-500]="currentImageIndex === i"
            (click)="selectImage(i)"
          >
            <img 
              [src]="image" 
              alt="House thumbnail"
              class="w-full h-full object-cover"
              loading="lazy"
            >
          </div>
        }
      </div>
    }
  </div>